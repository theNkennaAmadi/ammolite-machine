import{g as t,S as d,a as c}from"./ScrollTrigger-DjNdyQeP.js";import{L as u}from"./lenis-DvwNn7nP.js";t.registerPlugin(d);class h{constructor(e){this.container=e,this.video=this.container.querySelector(".embed.is-1").querySelector("video"),this.video2=this.container.querySelector(".embed.is-2").querySelector("video"),this.landinglogo=this.container.querySelector(".l-nav-logo"),this.init()}init(){t.to(".main",{visibility:"visible",opacity:1}),t.to(".page-wrapper",{visibility:"visible",opacity:1}),this.splitText(),this.initLenis(),this.initPageLoad(),this.initLinkHovers(),this.initLinkHovers2(),this.initLogoAnim()}initLogoAnim(){const e=t.timeline({paused:!0,defaults:{ease:"expo.out"}});e.fromTo(this.landinglogo.querySelectorAll(".sh"),{fill:"transparent",opacity:0},{fill:"currentColor",opacity:1,duration:.5,ease:"expo.out"},"<").from(this.landinglogo.querySelectorAll(".sh"),{x:"-1ch",duration:1,ease:"expo.out"},"<"),this.landinglogo.addEventListener("mouseover",()=>{e.timeScale(1),e.play()}),this.landinglogo.addEventListener("mouseout",()=>{e.timeScale(1.25),e.reverse()})}initLenis(){this.lenis=new u({smooth:!0}),this.lenis.on("scroll",d.update),t.ticker.add(e=>{this.lenis.raf(e*1e3)}),t.ticker.lagSmoothing(0),this.lenis.scrollTo(0),this.lenis.stop()}splitText(){let e=Array.from(this.container.querySelectorAll("h1:not([no-split]), h2:not([no-split]), h3:not([no-split]), p:not([no-split]), a:not([no-split]), label:not([no-split]) span:not([no-split]) blockquote:not([no-split])"));this.elementsToSplit=e.filter(i=>!e.some(n=>n!==i&&n.contains(i))),this.elementsToSplit.forEach(i=>{c({target:i,by:"chars"})}),this.setupTextAnimations()}initLinkHovers(){document.querySelectorAll("[s-link]").forEach(o=>{const l=o.querySelectorAll(".char"),a=t.timeline({paused:!0});a.fromTo(l,{yPercent:0},{yPercent:-100,duration:.5,ease:"power4.out",stagger:{amount:.1}}),o.addEventListener("mouseover",()=>{a.play()}),o.addEventListener("mouseout",()=>{a.reverse()})}),document.querySelectorAll(".work-item-grid").forEach(o=>{const l=o.querySelector(".work-header").querySelectorAll(".char"),a=t.timeline({paused:!0});a.fromTo(l,{yPercent:0},{yPercent:-100,duration:.5,ease:"power4.out",stagger:{amount:.1}}),o.addEventListener("mouseover",()=>{a.play()}),o.addEventListener("mouseout",()=>{a.reverse()})});let n=t.matchMedia();const s=this.container.querySelector(".mob-menu");let r=!1;n.add("(max-width: 479px)",()=>{const o=()=>{r?t.to(".nav-main-links-wrapper",{opacity:0}):t.to(".nav-main-links-wrapper",{opacity:1}),r=!r};return s.addEventListener("click",o),()=>{r||s.click(),s.removeEventListener("click",o)}})}initLinkHovers2(){document.querySelectorAll(".home-menu-link").forEach(i=>{const n=i.querySelectorAll(".char"),s=t.timeline({paused:!0});s.fromTo(n,{yPercent:0},{yPercent:-120,duration:.5,ease:"power4.out",stagger:{amount:.1}}),i.addEventListener("mouseover",()=>{s.play()}),i.addEventListener("mouseout",()=>{s.reverse()})})}setupTextAnimations(){this.elementsToSplit.forEach(e=>{const i=e.querySelectorAll(".char"),n=e.getAttribute("split-text");if(!e.hasAttribute("no-scroll")){t.set(i,{yPercent:110,opacity:0});let r=t.timeline({scrollTrigger:{trigger:e,start:"top 92%",end:"bottom bottom",invalidateOnRefresh:!0}});n==="chars"?r.to(i,{yPercent:0,stagger:{each:.05},opacity:1,ease:"power4.inOut",duration:1}):n==="intro"?r.to(i,{yPercent:0,opacity:1,delay:1,stagger:{each:.05,from:"center"}}):r.to(i,{yPercent:0,opacity:1,ease:"expo.out",duration:2})}})}initPageLoad(){if(this.videoPlayed=!1,this.videoInfoHidden=!1,sessionStorage.getItem("videoIntroPlayed")==="true"){this.skipVideoIntro();return}this.video.addEventListener("error",()=>{this.handleVideoFallback()}),this.video.addEventListener("loadstart",()=>{setTimeout(()=>{(this.video.readyState===0||this.video.paused)&&this.handleVideoFallback()},3e3)}),this.video.addEventListener("timeupdate",()=>{Math.floor(this.video.currentTime)===4&&!this.videoInfoHidden&&this.hideVideoInfoAndStartScroll(),this.video.currentTime===this.video.duration&&(console.log("video played"),t.to(".embed.is-2",{opacity:1,duration:1}))})}hideVideoInfoAndStartScroll(){this.videoInfoHidden||(this.videoInfoHidden=!0,sessionStorage.setItem("videoIntroPlayed","true"),t.to(".am-video-info",{opacity:0,display:"none",duration:.75}),this.lenis.start())}handleVideoFallback(){this.videoInfoHidden||(console.log("Video cannot be played, falling back to manual start"),this.hideVideoInfoAndStartScroll())}skipVideoIntro(){t.set(".am-video-info",{opacity:0,display:"none"}),t.set(".embed.is-1",{opacity:0,display:"none"}),t.set(".embed.is-2",{opacity:1}),this.lenis&&this.lenis.start(),this.videoInfoHidden=!0,console.log("Skipped video intro - already played in this session")}}new h(document.querySelector(".page-wrapper"));
