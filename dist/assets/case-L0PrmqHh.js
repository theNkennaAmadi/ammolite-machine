import{g as n,S as r,a as c}from"./ScrollTrigger-DjNdyQeP.js";import{L as u}from"./lenis-DvwNn7nP.js";n.registerPlugin(r);class d{constructor(e){this.container=e,this.video=this.container.querySelector("#heroVideo"),this.wrapper=e.querySelector(".work-visuals-wrapper"),this.layouts=[...this.container.querySelectorAll(".layout-title")],this.visuals=[...this.container.querySelectorAll(".work-visual-c")],this.layoutStyles=[{name:"Full Bleed",className:"full-bleed"},{name:"Partial Bleed",className:"partial-bleed"},{name:"2 Column",className:"col-2"},{name:"2 Column 3 Images",className:"col-2-img-3"},{name:"2 Column 4 Images",className:"col-2-img-4"},{name:"2 Column Offset",className:"col-2-offset"},{name:"3 Column",className:"col-3"},{name:"3 Photo Strip",className:"col-3-alt"},{name:"Collage",className:"collage"}],this.removeInvisibleVisuals(),this.initLayouts(),this.landinglogo=this.container.querySelector(".l-nav-logo"),this.playText=this.container.querySelector(".playback-wrapper div:nth-child(1)"),this.pauseText=this.container.querySelector(".playback-wrapper div:nth-child(2)"),this.muteText=this.container.querySelector(".sound-wrapper div:nth-child(2)"),this.unmuteText=this.container.querySelector(".sound-wrapper div:nth-child(1)"),this.soundWrapper=this.container.querySelector(".sound-wrapper"),this.playbackWrapper=this.container.querySelector(".playback-wrapper"),this.durationWrapper=this.container.querySelector(".duration-wrapper"),this.duration=this.container.querySelector(".duration"),this.init()}init(){this.splitText(),this.initLenis(),this.initLinkHovers(),this.setupVideoControls(),this.setupEventListeners(),this.setupTimelineNavigation(),this.initLogoAnim(),n.to(".main",{visibility:"visible",opacity:1})}initLenis(){const e=new u({smooth:!0});e.on("scroll",r.update),n.ticker.add(t=>{e.raf(t*1e3)}),n.ticker.lagSmoothing(0)}splitText(){let e=Array.from(this.container.querySelectorAll("h1:not([no-split]), h2:not([no-split]), h3:not([no-split]), p:not([no-split]), a:not([no-split]), label:not([no-split]) span:not([no-split]) blockquote:not([no-split])"));this.elementsToSplit=e.filter(t=>!e.some(o=>o!==t&&o.contains(t))),this.elementsToSplit.forEach(t=>{c({target:t,by:"chars"})}),this.setupTextAnimations()}initLinkHovers(){document.querySelectorAll("[s-link]").forEach(i=>{const l=i.querySelectorAll(".char"),a=n.timeline({paused:!0});a.fromTo(l,{yPercent:0},{yPercent:-100,duration:.5,ease:"power4.out",stagger:{amount:.1}}),i.addEventListener("mouseover",()=>{a.play()}),i.addEventListener("mouseout",()=>{a.reverse()})});let t=n.matchMedia();const o=this.container.querySelector(".mob-menu");let s=!1;t.add("(max-width: 479px)",()=>{const i=()=>{s?n.to(".nav-main-links-wrapper",{opacity:0}):n.to(".nav-main-links-wrapper",{opacity:1}),s=!s};return o.addEventListener("click",i),()=>{s||o.click(),o.removeEventListener("click",i)}})}setupTimelineNavigation(){this.durationWrapper.addEventListener("click",e=>{const t=this.durationWrapper.getBoundingClientRect(),s=(e.clientX-t.left)/t.width,i=this.video.duration*s;this.video.currentTime=i,this.video.paused&&this.video.play()})}setupTextAnimations(){this.elementsToSplit.forEach(e=>{const t=e.querySelectorAll(".char"),o=e.getAttribute("split-text");if(!e.hasAttribute("no-scroll")){n.set(t,{yPercent:110,opacity:0});let i=n.timeline({scrollTrigger:{trigger:e,start:"top 92%",end:"bottom bottom",invalidateOnRefresh:!0}});o==="chars"?i.to(t,{yPercent:0,stagger:{each:.05},opacity:1,ease:"power4.inOut",duration:1}):o==="intro"?i.to(t,{yPercent:0,opacity:1,delay:1,stagger:{each:.05,from:"center"}}):i.to(t,{yPercent:0,opacity:1,ease:"expo.out",duration:2})}})}removeInvisibleVisuals(){this.visuals=this.visuals.filter(e=>{const t=e.querySelector(".work-img"),o=e.querySelector(".work-video"),s=t&&t.classList.contains("w-condition-invisible"),i=o&&o.classList.contains("w-condition-invisible");return s&&t.remove(),i&&o.remove(),s&&i?(e.remove(),!1):!0})}initLayouts(){this.layouts.forEach(e=>{const t=e.textContent;if(!t||this.visuals.length===0)return;const o=this.layoutStyles.find(i=>i.name===t),s=document.createElement("div");if(o){const i=o.className;s.className=`work-visual-grid ${i}`,this.addVisualsToWrapper(s,t),s.hasChildNodes()&&this.wrapper.appendChild(s)}else console.warn(`No layout style found for ${t}`)}),this.visuals.length>0&&this.visuals.forEach(e=>{const t=document.createElement("div");t.className="work-visual-grid",t.appendChild(e),this.wrapper.appendChild(t)}),this.visualReveal()}addVisualsToWrapper(e,t){const s={"Full Bleed":1,"Partial Bleed":1,"2 Column":2,"2 Column 3 Images":3,"2 Column 4 Images":4,"2 Column Offset":2,"3 Column":3,"3 Photo Strip":3,Collage:5}[t]||0;for(let i=0;i<s&&this.visuals.length>0;i++)e.appendChild(this.visuals.shift())}visualReveal(){const e=new IntersectionObserver(t=>{t.forEach(o=>{o.isIntersecting&&(n.from(o.target.querySelectorAll(".work-visual-c"),{opacity:0,duration:2,ease:"expo.inOut"}),e.unobserve(o.target))})});this.container.querySelectorAll(".work-visual-grid").forEach(t=>{e.observe(t)})}setupVideoControls(){this.video.autoplay=!0,this.video.muted=!0}setupEventListeners(){this.playbackWrapper.addEventListener("click",()=>this.togglePlayPause()),this.soundWrapper.addEventListener("click",()=>this.toggleMute()),this.video.addEventListener("play",()=>this.onVideoPlay()),this.video.addEventListener("pause",()=>this.onVideoPause()),this.video.addEventListener("timeupdate",()=>this.updateDuration())}togglePlayPause(){this.video.paused?this.video.play():this.video.pause()}toggleMute(){this.video.muted=!this.video.muted,this.animateMuteUI()}onVideoPlay(){this.animatePlayPauseUI(!0)}onVideoPause(){this.animatePlayPauseUI(!1)}animatePlayPauseUI(e){n.to(this.playText,{yPercent:e?-110:0,duration:.3,ease:"power2.inOut"}),n.to(this.pauseText,{yPercent:e?-110:110,duration:.3,ease:"power2.inOut"})}animateMuteUI(){n.to(this.unmuteText,{yPercent:this.video.muted?0:-110,duration:.3,ease:"power2.inOut"}),n.to(this.muteText,{yPercent:this.video.muted?110:-110,duration:.3,ease:"power2.inOut"})}updateDuration(){const e=this.video.currentTime/this.video.duration;n.to(this.duration,{width:e*100+"%",duration:.1,ease:"none"})}setupTimelineNavigation(){this.durationWrapper.addEventListener("click",e=>{const t=this.durationWrapper.getBoundingClientRect(),s=(e.clientX-t.left)/t.width,i=this.video.duration*s;this.video.currentTime=i})}initLogoAnim(){const e=n.timeline({paused:!0,defaults:{ease:"expo.out"}});e.fromTo(this.landinglogo.querySelectorAll(".sh"),{fill:"transparent",opacity:0},{fill:"currentColor",opacity:1,duration:.5,ease:"expo.out"},"<").from(this.landinglogo.querySelectorAll(".sh"),{x:"-1ch",duration:1,ease:"expo.out"},"<"),this.landinglogo.addEventListener("mouseover",()=>{e.timeScale(1),e.play()}),this.landinglogo.addEventListener("mouseout",()=>{e.timeScale(1.25),e.reverse()})}}new d(document.querySelector(".page-wrapper"));
