import{g as t,S as r,a}from"./ScrollTrigger-DjNdyQeP.js";t.registerPlugin(r);class n{constructor(e){this.container=e,this.video=this.container.querySelector("video"),this.videoDetails=this.container.querySelector(".bg-video-details"),this.playText=this.container.querySelector(".playback-wrapper div:nth-child(1)"),this.pauseText=this.container.querySelector(".playback-wrapper div:nth-child(2)"),this.muteText=this.container.querySelector(".sound-wrapper div:nth-child(2)"),this.unmuteText=this.container.querySelector(".sound-wrapper div:nth-child(1)"),this.soundWrapper=this.container.querySelector(".sound-wrapper"),this.playbackWrapper=this.container.querySelector(".playback-wrapper"),this.duration=this.container.querySelector(".duration"),this.footer=this.container.querySelector(".l-footer"),this.landingInfo=this.container.querySelector(".landing-info"),this.landinglogo=this.container.querySelector(".l-nav-logo"),this.init()}init(){this.initSplitting(),this.initLinkHovers(),this.initLogoAnim(),this.setupVideoControls(),this.setupEventListeners(),this.setupResponsiveBehavior(),t.to(".page-wrapper",{opacity:1,duration:.5})}initSplitting(){const e=[...this.container.querySelectorAll("[split-target]")],s=a({target:e,by:"chars"});this.wordsC=this.container.querySelectorAll(".word"),this.wordsC.forEach(i=>{let o=document.createElement("span");o.classList.add("char-wrap"),i.parentNode.insertBefore(o,i),o.appendChild(i)}),this.chars=s.map(i=>i.chars),t.set(this.chars,{yPercent:120}),this.videoDetailsChars=this.videoDetails.querySelectorAll(".char"),e.length!==0&&e.forEach(i=>{if(!i.hasAttribute("no-ins")){const o=i.querySelectorAll(".char");t.fromTo(o,{"will-change":"transform",transformOrigin:"0% 50%",yPercent:120},{duration:2,ease:"expo.out",yPercent:0,scrollTrigger:{trigger:i,invalidateOnRefresh:!0,start:"top 95%",end:"bottom bottom"}})}}),t.to(this.footer.querySelectorAll(".char"),{yPercent:0,duration:2,ease:"power4.out"})}initLogoAnim(){const e=t.timeline({paused:!0,defaults:{ease:"expo.out"}});e.fromTo(this.landinglogo.querySelectorAll(".sh"),{fill:"transparent",opacity:0},{fill:"currentColor",opacity:1,duration:.5,ease:"expo.out"},"<").from(this.landinglogo.querySelectorAll(".sh"),{x:"-1ch",duration:1,ease:"expo.out"},"<"),this.landinglogo.addEventListener("mouseover",()=>{e.timeScale(1),e.play()}),this.landinglogo.addEventListener("mouseout",()=>{e.timeScale(1.25),e.reverse()})}initLinkHovers(){document.querySelectorAll("[s-link]").forEach(s=>{const i=s.querySelectorAll(".char"),o=t.timeline({paused:!0});o.to(i,{yPercent:-100,duration:.5,ease:"power4.out",stagger:{amount:.1}}),s.addEventListener("mouseover",()=>{o.play()}),s.addEventListener("mouseout",()=>{o.reverse()})})}setupVideoControls(){this.video.autoplay=!0,this.video.muted=!0}setupEventListeners(){this.playbackWrapper.addEventListener("click",()=>this.togglePlayPause()),this.soundWrapper.addEventListener("click",()=>this.toggleMute()),this.video.addEventListener("play",()=>this.onVideoPlay()),this.video.addEventListener("pause",()=>this.onVideoPause()),this.video.addEventListener("timeupdate",()=>this.updateDuration())}togglePlayPause(){this.video.paused?this.video.play():this.video.pause()}toggleMute(){this.video.muted=!this.video.muted,this.animateMuteUI()}onVideoPlay(){this.animatePlayPauseUI(!0)}onVideoPause(){this.animatePlayPauseUI(!1)}animatePlayPauseUI(e){t.to(this.playText,{yPercent:e?-110:0,duration:.3,ease:"power2.inOut"}),t.to(this.pauseText,{yPercent:e?-110:110,duration:.3,ease:"power2.inOut"})}animateMuteUI(){t.to(this.unmuteText,{yPercent:this.video.muted?0:-110,duration:.3,ease:"power2.inOut"}),t.to(this.muteText,{yPercent:this.video.muted?110:-110,duration:.3,ease:"power2.inOut"})}updateDuration(){const e=this.video.currentTime/this.video.duration;t.to(this.duration,{width:e*100+"%",duration:.1,ease:"none"})}setupResponsiveBehavior(){t.matchMedia().add("(min-width: 10px)",()=>{this.setupHoverBehavior()})}setupHoverBehavior(){t.set(this.videoDetailsChars,{yPercent:110}),this.video.addEventListener("mouseenter",()=>{this.showVideoDetails(),this.resetHideTimeout()}),this.video.addEventListener("mouseleave",()=>{this.resetHideTimeout()}),this.video.addEventListener("mousemove",()=>{this.showVideoDetails(),this.resetHideTimeout()}),this.resetHideTimeout()}showVideoDetails(){t.to(this.videoDetailsChars,{yPercent:0,duration:1,ease:"power2.out"})}hideVideoDetails(){t.to(this.videoDetailsChars,{yPercent:110,duration:1,ease:"power2.in"})}resetHideTimeout(){this.hideTimeout&&clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(()=>{this.hideVideoDetails()},4e3)}}window.addEventListener("load",()=>{new n(document.querySelector(".page-wrapper"))});
